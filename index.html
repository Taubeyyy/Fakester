<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fakester - Song Quiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id="theme-toggle"><i class="fa-solid fa-moon"></i></button>

    <div id="scoreboard" class="scoreboard hidden">
        <h3><i class="fa-solid fa-trophy"></i> Rangliste</h3>
        <ul id="scoreboard-list"></ul>
    </div>

    <div class="app-container">
        <div id="nickname-screen" class="screen active">
            <div class="card animate-fade-in">
                <h1><i class="fa-solid fa-music"></i> Fakester</h1>
                <p>Gib deinen Nickname ein, um zu starten.</p>
                <input type="text" id="nickname-input" placeholder="Dein Name..." maxlength="15">
                <button id="nickname-submit-button" class="btn-primary">Weiter <i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>

        <div id="home-screen" class="screen">
            <div class="card animate-fade-in">
                <h1>Willkommen, <span id="welcome-nickname"></span>!</h1>
                <p>Was möchtest du tun?</p>
                <div class="home-buttons">
                    <button id="show-create-button" class="btn-primary"><i class="fa-brands fa-spotify"></i> Spiel erstellen</button>
                    <button id="show-join-button" class="btn-secondary"><i class="fa-solid fa-right-to-bracket"></i> Spiel beitreten</button>
                </div>
            </div>
        </div>
        
        <div id="lobby-screen" class="screen">
            <div class="card animate-fade-in">
                <div class="lobby-header">
                    <h2>Lobby <span class="pin-display">PIN: <span id="lobby-pin">1234</span></span></h2>
                </div>
                <div class="player-list-container">
                    <h3>Spieler (<span id="player-count">1</span>)</h3>
                    <ul id="player-list"></ul>
                </div>
                <div id="host-settings" class="hidden">
                    <h3>Einstellungen</h3>
                    <div class="settings-grid">
                        <label for="category-select">Kategorie</label><select id="category-select"></select>
                        <label for="song-count-select">Runden</label><select id="song-count-select"><option>5</option><option selected>10</option><option>15</option><option>20</option></select>
                        <label for="guess-time-select">Ratezeit</label><select id="guess-time-select"><option>30</option><option selected>60</option><option>90</option></select>
                    </div>
                    <button id="start-game-button" class="btn-primary"><i class="fa-solid fa-play"></i> Spiel starten</button>
                </div>
                <div id="guest-waiting-message" class="hidden"><p>Der Host nimmt die Einstellungen vor.</p></div>
            </div>
        </div>

        <div id="countdown-screen" class="screen">
            <div class="card animate-fade-in">
                <h1 id="countdown-timer">5</h1>
                <p>Mach dich bereit!</p>
            </div>
        </div>
        
        <div id="game-screen" class="screen">
            <div class="game-header">
                <span id="round-info">Runde 1 / 10</span>
                <span id="time-info"><i class="fa-solid fa-clock"></i> <span id="time-left">60</span>s</span>
            </div>
            <div class="card animate-fade-in">
                <div class="music-player-indicator">
                    <i class="fa-brands fa-spotify" style="color: #1DB954;"></i>
                    <p>Song wird über Spotify abgespielt...</p>
                </div>
                <div class="guess-area">
                    <input type="text" id="artist-guess" placeholder="Künstler...">
                    <input type="text" id="title-guess" placeholder="Titel...">
                    <input type="number" id="year-guess" placeholder="Jahr...">
                    <div class="button-group">
                        <button id="submit-guess-button" class="btn-primary">Raten!</button>
                        <button id="ready-button" class="btn-secondary" disabled><i class="fa-solid fa-forward"></i> Fertig</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="result-screen" class="screen">
            <div class="card animate-fade-in">
                <h2>Richtig war:</h2>
                <div id="correct-answer-info" class="correct-answer"></div>
                <h3>Nächste Runde in Kürze...</h3>
            </div>
        </div>

        <div id="game-over-screen" class="screen">
             <div class="card animate-fade-in">
                <h1><i class="fa-solid fa-trophy"></i> Spiel beendet!</h1>
                <h3>Endstand:</h3>
                <ul id="final-scores-list"></ul>
                <button id="back-to-home-button" class="btn-primary"><i class="fa-solid fa-home"></i> Zurück zum Menü</button>
            </div>
        </div>
    </div>

    <div id="join-modal-overlay" class="modal-overlay hidden">
        <div class="modal-card">
            <button id="close-modal-button" class="close-button">×</button>
            <h2>Spiel beitreten</h2>
            <div id="pin-display" class="pin-display-box">
                <span></span><span></span><span></span><span></span>
            </div>
            <p id="join-error-message" class="error-message hidden"></p>
            <div id="numberpad" class="numberpad">
                <button class="num-btn">1</button><button class="num-btn">2</button><button class="num-btn">3</button>
                <button class="num-btn">4</button><button class="num-btn">5</button><button class="num-btn">6</button>
                <button class="num-btn">7</button><button class="num-btn">8</button><button class="num-btn">9</button>
                <button class="num-btn icon-btn" data-action="clear"><i class="fa-solid fa-trash"></i></button>
                <button class="num-btn">0</button>
                <button class="num-btn icon-btn" data-action="backspace"><i class="fa-solid fa-delete-left"></i></button>
            </div>
            <button id="join-game-button" class="btn-primary"><i class="fa-solid fa-check"></i> Bestätigen</button>
        </div>
    </div>
    
    <div id="debug-log"></div>

    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <script src="script.js"></script>
</body>
</html>