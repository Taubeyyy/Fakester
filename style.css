@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap');

:root {
    --accent-color: #1DB954; 
    --accent-color-faded: #1db95420; 
    
    --primary-color: var(--accent-color); 

    --background-color: #121212;
    --surface-color: #181818;
    --text-color: #FFFFFF;
    --text-muted-color: #B3B3B3;
    --dark-grey: #282828;
    --medium-grey: #535353;
    --success-color: #28a745;
    --danger-color: #dc3545;
    --border-radius: 12px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Montserrat', sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    display: flex; flex-direction: column;
    height: 100dvh;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}
body.is-guest .guest-hidden { display: none !important; }
body:not(.is-guest) .is-guest { display: none !important; }

.app-background { 
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
    z-index: -1; 
    background-color: var(--background-color);
    background-image: radial-gradient(ellipse 80% 50% at 5% 95%, rgba(29, 185, 84, 0.2), transparent);
    transition: background 0.5s ease-in-out;
}
.app-background.radial-only {
    background-image: radial-gradient(ellipse 80% 50% at 5% 95%, var(--accent-color-faded, #1db95420), transparent);
}

.app-header {
    width: 100%; padding: 15px 20px; z-index: 10;
    display: flex; align-items: center; justify-content: space-between; position: relative;
    border-bottom: 1px solid var(--dark-grey);
}
.logo-container { position: absolute; left: 50%; transform: translateX(-50%); }
.logo-container h1 { font-size: 1.5rem; color: var(--accent-color); font-weight: 800; letter-spacing: 2px; }
body:has(#auth-screen.active) .app-header { display: none; }
.button-leave { background: none; border: none; font-size: 1.5rem; color: var(--text-muted-color); cursor: pointer; z-index: 1; padding: 5px; }
.app-header .header-icons { display: flex; align-items: center; gap: 15px; }
.header-spots { font-size: 0.9rem; font-weight: 700; color: var(--accent-color); }

.screen {
    display: none; flex-grow: 1; flex-direction: column; align-items: center;
    justify-content: flex-start; padding: 20px; width: 100%; overflow-y: auto;
    opacity: 0; visibility: hidden; transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    -webkit-overflow-scrolling: touch;
}
#auth-screen { justify-content: center; }
.screen.active { display: flex; opacity: 1; visibility: visible; }

.container, .auth-container, .home-container, .lobby-container, .game-container {
    width: 100%; max-width: 450px; text-align: center;
    display: flex; flex-direction: column; gap: 20px;
}
.text-left { text-align: left; }
h2 { font-size: 1.8rem; margin-bottom: 10px; font-weight: 800; }
p { color: var(--text-muted-color); line-height: 1.5; margin-bottom: 15px; }

.button-primary, .button-secondary, .button-danger {
    display: inline-flex; align-items: center; justify-content: center; gap: 10px; padding: 12px 24px; border: none; border-radius: 50px;
    font-size: 1rem; font-weight: 700; cursor: pointer; text-decoration: none; width: 100%; transition: transform 0.1s ease, background-color 0.2s ease, border-color 0.2s ease, background 0.2s ease;
}
.button-primary:active, .button-secondary:active, .button-danger:active { transform: scale(0.97); }

.button-primary { 
    background: var(--accent-color); 
    color: var(--background-color); 
    border: 2px solid transparent;
}
.button-primary:disabled { 
    background: var(--medium-grey); 
    color: var(--dark-grey); 
    cursor: not-allowed; 
    opacity: 0.7; 
    border-color: transparent;
}

.button-secondary { 
    background-color: rgba(24, 24, 24, 0.7); 
    color: var(--text-color); 
    border: 2px solid var(--dark-grey);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px); 
}
.button-secondary:hover {
    background-color: var(--dark-grey);
    border-color: var(--medium-grey);
}

.button-danger { background-color: var(--danger-color); color: var(--text-color); border: 2px solid transparent; }
.button-icon { background: var(--dark-grey); color: var(--text-muted-color); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s ease; flex-shrink: 0; }
.button-icon:hover { background-color: var(--medium-grey); }
.button-small { padding: 8px 16px; font-size: 0.9rem; width: auto; }
.button-select {
    width: 100%; padding: 12px 15px; background-color: var(--dark-grey); border: 1px solid var(--medium-grey); border-radius: 8px;
    color: var(--text-color); font-size: 1rem; text-align: left; font-family: 'Montserrat', sans-serif; cursor: pointer;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    transition: border-color 0.2s ease;
}
.button-select:hover { border-color: var(--accent-color); }

input, select.lobby-select, input.lobby-input { width: 100%; padding: 12px 15px; background-color: var(--dark-grey); border: 1px solid var(--medium-grey); border-radius: 8px; color: var(--text-color); font-size: 1rem; }
input:focus, select:focus { border-color: var(--accent-color); outline: none; }
input:-webkit-autofill, input:-webkit-autofill:hover, input:-webkit-autofill:focus, input:-webkit-autofill:active { -webkit-box-shadow: 0 0 0 30px var(--dark-grey) inset !important; -webkit-text-fill-color: var(--text-color) !important; }
.hidden { display: none !important; }

.home-logo-container h1 { font-size: 2.5rem; font-weight: 800; letter-spacing: 2px; color: var(--text-muted-color); margin-bottom: 20px; }
.auth-form { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
.auth-toggle-text { font-size: 0.9rem; margin-top: 15px; }
.auth-toggle-text a { color: var(--accent-color); text-decoration: none; font-weight: 700; }
.guest-mode-separator { display: flex; align-items: center; text-align: center; color: var(--text-muted-color); margin: 25px 0; }
.guest-mode-separator::before, .guest-mode-separator::after { content: ''; flex: 1; border-bottom: 1px solid var(--medium-grey); }
.guest-mode-separator:not(:empty)::before { margin-right: .5em; }
.guest-mode-separator:not(:empty)::after { margin-left: .5em; }

.home-container { justify-content: flex-start; }
.profile-section {
    display: flex; align-items: center; gap: 15px; width: 100%;
    padding: 15px; border-radius: var(--border-radius);
    background-color: var(--surface-color);
}
.profile-picture { width: 50px; height: 50px; border-radius: 50%; background-color: var(--dark-grey); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--text-muted-color); flex-shrink: 0; border: none; cursor: pointer; }
.profile-info { text-align: left; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; min-width: 0; gap: 4px; }
.username-container { position: relative; display: flex; align-items: center; gap: 8px; cursor: pointer; transition: color 0.3s ease; }
.username-container h2 { margin-bottom: 0; overflow: visible; text-overflow: clip; font-size: 1.4rem; line-height: 1.3; min-width: 0; }

.gradient-text {
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent !important;
    -webkit-text-fill-color: transparent;
    display: inline-block;
}

.edit-icon { font-size: 0.8rem; color: var(--text-muted-color); flex-shrink: 0; }
.profile-title-button { background: none; border: none; padding: 0; cursor: pointer; text-align: left; }
.profile-title { font-size: 0.8rem; font-weight: 700; color: var(--accent-color); background: var(--accent-color-faded); padding: 3px 8px; border-radius: 20px; display: inline-block; }
.profile-actions { margin-left: auto; display: flex; gap: 8px; align-items: center; }

.level-progress-container { background: none; border: none; padding: 0; width: 100%; cursor: pointer; text-align: left; margin-top: 5px; }
.level-text { font-size: 0.8rem; color: var(--text-muted-color); font-weight: 700; margin-bottom: 2px; display: block; }
.xp-bar { width: 100%; height: 6px; background-color: var(--dark-grey); border-radius: 3px; overflow: hidden; }
.xp-fill { width: 0%; height: 100%; background: var(--accent-color); border-radius: 3px; transition: width 0.5s ease-out; }
.xp-text { font-size: 0.7rem; color: var(--text-muted-color); margin-top: 3px; display: block; }

.stats-overview-card { background-color: var(--surface-color); padding: 15px 20px; border-radius: var(--border-radius); width: 100%; cursor: pointer; transition: transform 0.2s ease, background-color 0.2s ease; border: none; color: var(--text-color); font-family: 'Montserrat', sans-serif; }
.stats-overview-card:hover { background-color: var(--dark-grey); }
.stats-overview-card:active { transform: scale(0.98); }
.stats-overview-card h3 { margin: 0 0 15px 0; text-align: left; font-size: 1rem; color: var(--text-muted-color); }
.stats-grid-preview { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.stats-grid-preview .stat-item .stat-value { font-size: 1.6rem; font-weight: 800; color: var(--accent-color); display: block; }
.stats-grid-preview .stat-item .stat-label { font-size: 0.7rem; color: var(--text-muted-color); text-transform: uppercase; }
.home-actions { display: flex; flex-direction: column; gap: 15px; width: 100%; margin-top: 20px; }

.home-actions .button-primary,
.home-actions .button-secondary {
    background-color: rgba(24, 24, 24, 0.7); 
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px); 
    border: 1px solid var(--dark-grey);
    padding-top: 14px; 
    padding-bottom: 14px;
}
.home-actions .button-primary {
    background: var(--accent-color); 
    border-color: transparent;
    color: var(--background-color);
}
.home-actions .button-primary:hover {
    filter: brightness(1.2);
}
.home-actions .button-secondary {
    border-color: var(--dark-grey);
    color: var(--text-color);
}
.home-actions .button-secondary:hover {
    background-color: var(--dark-grey);
    border-color: var(--medium-grey);
}
#spotify-connect-button {
    background-color: rgba(29, 185, 84, 0.7); 
    border-color: #1DB954;
    color: #FFFFFF;
}
#spotify-connect-button:hover {
    background-color: #1ED760; 
    border-color: #1ED760;
}

.corner-button { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; background-color: var(--dark-grey); color: var(--text-muted-color); border: none; border-radius: 50%; font-size: 1rem; z-index: 100; cursor: pointer; display: flex !important; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

.stats-full-grid, .selection-grid, .icon-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); 
    gap: 15px; 
}
.icon-grid {
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
}
.stat-card, .achievement-card {
    background-color: var(--surface-color);
    padding: 20px;
    border-radius: var(--border-radius);
    text-align: left;
}
.stat-card .stat-value, .achievement-card .stat-value {
    font-size: 2rem;
    font-weight: 800;
    color: var(--accent-color);
    display: block;
    margin-bottom: 5px;
}
.stat-card .stat-label, .achievement-card .stat-label {
    font-size: 0.8rem;
    color: var(--text-muted-color);
    text-transform: uppercase;
    font-weight: 700;
}
.achievement-card {
    display: flex; flex-direction: column; gap: 10px;
    border: 1px solid var(--dark-grey);
    opacity: 0.5;
}
.achievement-card.unlocked {
    opacity: 1;
    border-color: var(--accent-color);
    background-color: var(--accent-color-faded);
}
.achievement-card h3 { font-size: 1.1rem; margin: 0; }
.achievement-card p { font-size: 0.9rem; margin: 0; color: var(--text-muted-color); }
.achievement-card .reward { font-size: 0.9rem; font-weight: 700; color: var(--accent-color); }

.title-card, .icon-card {
    background-color: var(--surface-color);
    border: 2px solid var(--surface-color);
    border-radius: var(--border-radius);
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    min-height: 120px;
}
.title-card.locked, .icon-card.locked {
    background-color: var(--dark-grey);
    opacity: 0.5;
    cursor: not-allowed;
    position: relative;
}
.title-card.locked::after, .icon-card.locked::after {
    content: '\f023'; 
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 0.8rem;
    color: var(--text-muted-color);
}
.title-card:not(.locked):hover, .icon-card:not(.locked):hover {
    border-color: var(--accent-color);
}
.title-card.equipped, .icon-card.equipped {
    border-color: var(--accent-color);
    background-color: var(--accent-color-faded);
    box-shadow: 0 0 10px var(--accent-color-faded);
}
.title-card .title-name, .icon-card .title-name { font-weight: 700; }
.title-card .title-desc, .icon-card .title-desc { font-size: 0.8rem; color: var(--text-muted-color); }
.icon-card .icon-preview {
    font-size: 2.5rem;
    color: var(--accent-color);
    line-height: 1;
}

.level-progress-list { display: flex; flex-direction: column; gap: 15px; }
.level-progress-item { background-color: var(--surface-color); border: 1px solid var(--dark-grey); border-radius: var(--border-radius); padding: 15px; }
.level-progress-item.unlocked { border-color: var(--accent-color); background-color: var(--accent-color-faded); }
.level-progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.level-progress-header h3 { margin: 0; font-size: 1.2rem; }
.level-progress-header span { font-size: 0.9rem; color: var(--text-muted-color); }
.level-progress-rewards { display: flex; flex-direction: column; gap: 10px; align-items: flex-start; }
.reward-item { display: flex; align-items: center; gap: 10px; background-color: var(--dark-grey); padding: 8px 12px; border-radius: 8px; }
.reward-item i { font-size: 1rem; color: var(--accent-color); width: 20px; text-align: center;}
.reward-item span { font-size: 0.9rem; font-weight: 700; }
.no-reward { font-size: 0.8rem; color: var(--text-muted-color); font-style: italic; margin-left: 30px;}


.lobby-players-container { width: 100%; text-align: left; }
.lobby-players-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.player-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; }

.player-card { 
    background-color: var(--dark-grey); 
    border-radius: var(--border-radius); 
    position: relative; 
    overflow: hidden;
    min-height: 80px; 
    border: 1px solid var(--dark-grey);
    --player-accent-color: var(--accent-color);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.player-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
.player-card-background {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-size: cover;
    background-position: center;
    opacity: 0.2; 
    z-index: 1;
}
.player-card-content {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: linear-gradient(90deg, rgba(40, 40, 40, 0.9) 0%, rgba(40, 40, 40, 0.7) 100%); 
    height: 100%;
    min-height: 80px;
}
.player-card.is-host .player-card-content {
     border-left: 4px solid var(--player-accent-color);
     padding-left: 8px; 
}
.player-card .player-icon { 
    font-size: 1.8rem; 
    color: var(--text-color); 
    flex-shrink: 0;
    width: 30px;
    text-align: center;
    position: relative; 
}
.player-card.is-host .player-icon::after {
    content: '\f521'; 
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    top: -10px; 
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.8rem;
    color: var(--player-accent-color);
    text-shadow: 0 0 3px #000;
    z-index: 5;
}

.player-info {
    display: flex;
    flex-direction: column;
    text-align: left;
    gap: 2px;
    overflow: hidden; 
}
.player-title {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--player-accent-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.player-card .player-name { 
    font-weight: 700; 
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    font-size: 1rem; 
    line-height: 1.2;
    transition: color 0.3s ease; 
}

.player-card .player-name[style*="background"] {
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent !important;
}

.player-card.new { animation: slideIn 0.5s ease-out forwards; }
.player-card.disconnected::after { content: 'Offline'; position: absolute; top:0; left:0; right:0; bottom:0; background: #000000a0; color: white; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; z-index: 3; }
@keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }


#host-settings { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--dark-grey); width: 100%; display: flex; flex-direction: column; gap: 15px; }
#host-settings h3 { text-align: left; margin-bottom: 5px; font-size: 1.1rem; color: var(--text-muted-color); }
.settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
.setting { text-align: left; display: flex; flex-direction: column; gap: 8px; }
.setting label { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: var(--text-muted-color); }
.help-icon { color: var(--medium-grey); cursor: help; }
.preset-group { display: flex; gap: 8px; width: 100%; flex-wrap: wrap; }
.preset-button { flex: 1 1 auto; background-color: transparent; border: 2px solid var(--dark-grey); color: var(--text-muted-color); padding: 8px 10px; border-radius: 8px; font-weight: 700; cursor: pointer; transition: all 0.2s ease; min-width: 50px; font-size: 0.8rem; text-align: center; -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px); background-color: rgba(24, 24, 24, 0.7); }
.preset-button:hover { border-color: var(--medium-grey); }
.preset-button:active { transform: scale(0.95); } 
.preset-button.active { background: var(--accent-color); border-color: var(--accent-color); color: var(--background-color); }

#game-type-selection-screen .preset-button {
    padding: 15px 10px;
    font-size: 1rem;
    border-radius: var(--border-radius);
}
#game-type-selection-screen .preset-button.active {
    border-color: var(--accent-color);
    background: var(--accent-color-faded);
    color: var(--text-color);
    box-shadow: 0 0 10px var(--accent-color-faded);
}

.button-start { padding: 15px; font-size: 1.1rem; }

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    padding: 20px;
}
.modal-overlay:not(.hidden) {
    opacity: 1;
    visibility: visible;
}
.modal {
    background-color: var(--surface-color);
    padding: 25px;
    border-radius: var(--border-radius);
    width: 100%;
    max-width: 450px;
    text-align: left;
    position: relative;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    transform: scale(0.95);
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: 15px; 
}
.modal-overlay:not(.hidden) .modal {
    transform: scale(1);
}
.modal h2 {
    margin-top: 0;
    margin-bottom: 0; 
    text-align: center;
}
.modal p {
    margin-bottom: 0; 
    text-align: center;
}
.button-exit-modal {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 2rem;
    color: var(--text-muted-color);
    cursor: pointer;
    line-height: 1;
    padding: 5px;
}
.pin-display { display: flex; gap: 10px; justify-content: center; margin: 15px 0; }
.pin-digit { width: 50px; height: 60px; background: var(--dark-grey); border: 1px solid var(--medium-grey); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 700; }
.numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.numpad button { padding: 15px; font-size: 1.5rem; font-weight: 700; background: var(--dark-grey); border: none; border-radius: 8px; color: var(--text-color); cursor: pointer; }
.numpad button:active { background-color: var(--medium-grey); }
.numpad button[data-action="confirm"]:disabled { color: var(--medium-grey); }

.selection-modal .selection-list { list-style: none; display: flex; flex-direction: column; gap: 8px; }

#confirm-action-modal-overlay {
    z-index: 1002;
}

.loading-overlay { 
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
    background: rgba(0,0,0,0.7); 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    z-index: 9999; 
    padding: 20px;
}
.spinner { width: 50px; height: 50px; border: 5px solid var(--dark-grey); border-top-color: var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

#loading-overlay-message {
    color: var(--text-color);
    font-size: 1.1rem;
    font-weight: 700;
    margin-top: 20px; 
    text-align: center;
}

.countdown-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 9998; font-size: 8rem; font-weight: 800; color: var(--accent-color); }


.tabs { display: flex; width: 100%; border-bottom: 1px solid var(--dark-grey); overflow-x: auto; }
.tab-button { flex: 1; background: none; border: none; color: var(--text-muted-color); padding: 10px; font-size: 1rem; font-weight: 700; cursor: pointer; border-bottom: 2px solid transparent; white-space: nowrap; }
.tab-button.active { color: var(--accent-color); border-bottom-color: var(--accent-color); }
.tab-content { display: none; margin-top: 15px; }
.tab-content.active { display: block; }

.friends-modal .add-friend-form { display: flex; gap: 10px; }
.friends-modal .add-friend-form input { flex-grow: 1; }
.friends-modal .add-friend-form button { width: auto; padding: 0 15px; }
.friends-modal ul { list-style: none; display: flex; flex-direction: column; gap: 10px; max-height: 40vh; overflow-y: auto; padding-right: 5px; }
.friends-modal li { display: flex; align-items: center; justify-content: space-between; background-color: var(--dark-grey); padding: 10px 15px; border-radius: 8px; }
.friends-modal .friend-info { text-align: left; }
.friends-modal .friend-status { font-size: 0.8rem; color: var(--text-muted-color); }
.friends-modal .friend-status.online { color: var(--accent-color); font-weight: 700;}
.friends-modal .friend-actions { display: flex; gap: 8px; }
.friends-modal .friend-actions button { width: 35px; height: 35px; font-size: 0.9rem; padding: 0; }
.badge { background-color: var(--danger-color); color: white; font-size: 0.7rem; font-weight: 700; padding: 2px 6px; border-radius: 10px; margin-left: 5px; }

.friends-modal li .friend-actions .button-join {
    background: var(--accent-color);
    color: var(--background-color);
    width: auto;
    padding: 0 12px;
    font-size: 0.8rem;
    font-weight: 700;
}
.friends-modal li .friend-actions .button-join:hover {
    background: var(--accent-color);
    filter: brightness(1.2);
}

.popup-overlay {
    position: fixed;
    bottom: 90px;
    left: 20px;
    right: 20px;
    z-index: 1001;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
    pointer-events: none;
}

.invite-popup { 
    width: 100%;
    max-width: 450px;
    background: var(--surface-color); 
    border-left: 4px solid var(--accent-color); 
    padding: 15px; 
    border-radius: 8px; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    gap: 10px; 
    transform: translateY(150%); 
    animation: slideInUp 0.5s ease-out forwards; 
    pointer-events: all;
}
@keyframes slideInUp { to { transform: translateY(0); } }
.invite-popup p { margin: 0; font-size: 0.9rem; }
.invite-popup .invite-actions { display: flex; gap: 10px; }

.friend-request-popup {
    width: 100%;
    max-width: 450px;
    background: var(--surface-color); 
    border-left: 4px solid var(--success-color); 
    padding: 15px; 
    border-radius: 8px; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    gap: 10px; 
    transform: translateY(150%); 
    animation: slideInUp 0.5s ease-out forwards; 
    pointer-events: all;
}
.friend-request-popup p { margin: 0; font-size: 0.9rem; }
.friend-request-popup .invite-actions { display: flex; gap: 10px; }


.on-page-console {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40dvh;
    background-color: #0A0A0A;
    border-top: 1px solid var(--dark-grey);
    z-index: 9998;
    display: flex;
    flex-direction: column;
}
.console-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background-color: var(--dark-grey);
    font-weight: 700;
    font-size: 0.9rem;
}
.console-header span { color: var(--accent-color); }
.console-header div { display: flex; gap: 5px; }
.console-header button { background: none; border: none; color: var(--text-muted-color); font-size: 1rem; cursor: pointer; padding: 5px; width: 30px; height: 30px; }
.console-output {
    flex-grow: 1;
    overflow-y: auto;
    font-family: monospace;
    font-size: 0.8rem;
    padding: 10px;
    color: var(--text-muted-color);
}
.console-output div { padding: 2px 0; border-bottom: 1px solid #222; }
.console-output .log-error pre { color: var(--danger-color); }
.console-output .log-warn pre { color: #f0ad4e; }
.console-output pre { white-space: pre-wrap; word-wrap: break-word; margin: 0; }

.toggle-console-btn {
    position: fixed;
    bottom: 20px;
    left: 20px; 
    width: 50px;
    height: 50px;
    background-color: var(--dark-grey);
    color: var(--text-muted-color);
    border: none;
    border-radius: 50%;
    font-size: 1rem;
    z-index: 100;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

.header-spots { font-size: 1rem; font-weight: 700; color: var(--accent-color); }
.header-spots span { font-weight: 800; }
#shop-screen .container { gap: 15px; }
#shop-screen .tabs { margin-bottom: 10px; }
.shop-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--dark-grey); padding-bottom: 10px; }
.shop-header h2 { margin-bottom: 0; }
.shop-header .spots-display { font-size: 1.1rem; }

.shop-items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
}
.shop-items-grid#shop-icons-list,
.shop-items-grid#shop-colors-list,
.shop-items-grid#shop-accent-colors-list {
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
}

.shop-item {
    background-color: var(--surface-color); 
    border-radius: var(--border-radius); 
    border: 2px solid var(--surface-color);
    display: flex; 
    flex-direction: column; 
    transition: all 0.2s ease; 
    width: 100%;
    white-space: normal;
    position: relative;
    overflow: hidden;
    padding: 10px;
    gap: 10px;
}
.shop-item:hover { 
    transform: translateY(-4px);
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
}

.shop-item.owned { 
    opacity: 0.6; 
    background-color: var(--dark-grey); 
    border-color: var(--dark-grey);
}
.shop-item.cannot-afford { 
    border-color: var(--danger-color);
    opacity: 0.8;
}
.shop-item.can-afford {
    border-color: var(--success-color);
}

.shop-item .item-preview-icon { 
    font-size: 3rem; 
    margin: 10px auto; 
    color: var(--accent-color); 
    line-height: 1;
    text-align: center;
    padding: 10px;
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 80px;
}
.shop-item .item-preview-background { 
    width: 100%; 
    height: 100px; 
    background-size: cover; 
    background-position: center; 
    border-radius: 8px; 
    background-color: var(--dark-grey); 
    flex-shrink: 0;
}
.shop-item .item-preview-color {
    width: 100%;
    height: 100px; 
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    color: rgba(255, 255, 255, 0.5);
    text-shadow: 0 0 5px rgba(0,0,0,0.5);
    background-clip: padding-box;
    background: var(--dark-grey);
    flex-shrink: 0;
}

.shop-item-info {
    padding: 0;
    margin-top: auto; 
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.shop-item .item-name { 
    font-size: 1rem; 
    font-weight: 700; 
    color: var(--text-color); 
    text-align: left;
    margin: 0;
}
.shop-item .item-description { 
    font-size: 0.75rem; 
    color: var(--text-muted-color); 
    line-height: 1.4; 
    text-align: left;
    margin: 0;
}
.shop-item .buy-button-container {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-top: 5px;
}
.shop-item .item-cost { 
    font-size: 1.2rem; 
    font-weight: 800; 
    color: var(--accent-color); 
    line-height: 1;
}
.shop-item .buy-button { 
    width: auto; 
    font-size: 0.8rem; 
    padding: 6px 12px;
    border-radius: 50px;
    margin-left: auto;
    flex-shrink: 0;
}
.shop-item .buy-button:disabled { 
    background-color: var(--medium-grey); 
    color: var(--dark-grey);
    cursor: not-allowed;
    opacity: 0.7;
}


.reaction-buttons { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin: 20px auto 0 auto; max-width: 300px; opacity: 1; transition: opacity 0.2s; }
.reaction-buttons.cooldown { opacity: 0.5; pointer-events: none; }
.reaction-btn { font-size: 1.4rem; width: 45px; height: 45px; background-color: var(--dark-grey); transition: transform 0.1s ease; }
.reaction-btn:active { transform: scale(0.9); }
.player-reaction-popup { 
    position: absolute; 
    top: -15px; 
    left: 50%; 
    transform: translateX(-50%); 
    font-size: 1.8rem; 
    animation: floatUpAndFade 1.5s ease-out forwards; 
    pointer-events: none; 
    z-index: 10; 
    text-shadow: 0 0 5px rgba(0,0,0,0.5); 
}
@keyframes floatUpAndFade { 0% { opacity: 1; transform: translate(-50%, 0); } 100% { opacity: 0; transform: translate(-50%, -40px); } }

.reaction-toast {
    width: 100%;
    max-width: 450px;
    background: var(--surface-color); 
    border-left: 4px solid var(--accent-color);
    padding: 10px 15px; 
    border-radius: 8px; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    transform: translateY(150%); 
    animation: slideInUp 0.5s ease-out forwards; 
    pointer-events: all;
    opacity: 0.9;
}
.reaction-toast .icon {
    font-size: 1.2rem;
    color: var(--accent-color);
}
.reaction-toast .name {
    font-weight: 700;
    font-size: 0.9rem;
}
.reaction-toast .reaction {
    font-size: 1.2rem;
    margin-left: auto;
}


.button-gift { color: var(--accent-color); width: 35px; height: 35px; font-size: 0.9rem; padding: 0; }

#lobby-screen { 
    background-image: none; 
    background-size: cover; 
    background-position: center; 
    transition: background-image 0.5s ease-in-out, background 0.5s ease-in-out; 
}

.guess-types-container {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    background-color: var(--dark-grey);
    padding: 12px;
    border-radius: 8px;
}
.checkbox-label {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    font-size: 0.9rem;
    color: var(--text-muted-color);
}
.checkbox-label input[type="checkbox"] { display: none; }
.checkbox-custom {
    width: 20px;
    height: 20px;
    background-color: var(--medium-grey);
    border: 2px solid var(--text-muted-color);
    border-radius: 4px;
    margin-right: 10px;
    display: inline-block;
    position: relative;
    transition: background-color 0.2s ease, border-color 0.2s ease;
}
.checkbox-custom::after {
    content: '\f00c'; 
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    font-size: 0.8rem;
    color: var(--text-color); 
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    transition: transform 0.1s ease-out;
}
.checkbox-label input[type="checkbox"]:checked + .checkbox-custom {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}
.checkbox-label input[type="checkbox"]:checked + .checkbox-custom::after {
    transform: translate(-50%, -50%) scale(1);
}
.checkbox-label:hover .checkbox-custom {
    border-color: var(--accent-color);
}
.validation-error {
    font-size: 0.8rem;
    color: var(--danger-color);
    margin: 5px 0 0 0;
    text-align: left;
}

.iziToast.iziToast-layout1 {
    background: var(--dark-grey) !important;
    border-radius: var(--border-radius) !important;
    border: 1px solid var(--medium-grey);
    box-shadow: 0 4px 15px rgba(0,0,0,0.3) !important;
}
.iziToast > .iziToast-body .iziToast-message {
    font-family: 'Montserrat', sans-serif !important;
    font-size: 0.9rem !important;
    font-weight: 700 !important;
    color: var(--text-color) !important;
}
.iziToast.iziToast-layout1 .iziToast-icon {
    font-size: 1.2rem;
    margin-top: 2px;
}

.color-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 15px;
}
.color-card {
    background-color: var(--surface-color);
    border: 2px solid var(--surface-color);
    border-radius: var(--border-radius);
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    min-height: 120px;
}
.color-card.locked {
    background-color: var(--dark-grey);
    opacity: 0.5;
    cursor: not-allowed;
    position: relative;
}
.color-card.locked::after {
    content: '\f023';
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 0.8rem;
    color: var(--text-muted-color);
}
.color-card:not(.locked):hover {
    border-color: var(--accent-color);
}
.color-card.equipped {
    border-color: var(--accent-color);
    background-color: var(--accent-color-faded);
    box-shadow: 0 0 10px var(--accent-color-faded);
}
.color-card .color-preview {
    width: 100%;
    height: 60px;
    border-radius: 8px;
    border: 1px solid var(--dark-grey);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: rgba(255, 255, 255, 0.5);
    text-shadow: 0 0 5px rgba(0,0,0,0.5);
    background: var(--dark-grey);
}
.color-card .color-name { font-size: 0.8rem; font-weight: 700; }
.color-card .color-desc { font-size: 0.8rem; color: var(--text-muted-color); }


#owned-backgrounds-list {
    list-style: none;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); 
    gap: 15px;
    margin-top: 0 !important; 
}
.background-card {
    background-color: var(--surface-color);
    border: 2px solid var(--surface-color);
    border-radius: var(--border-radius);
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    min-height: 120px;
}
.background-card.locked {
    background-color: var(--dark-grey);
    opacity: 0.5;
    cursor: not-allowed;
    position: relative;
}
.background-card.locked::after {
    content: '\f023';
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 0.8rem;
    color: var(--text-muted-color);
}
.background-card:not(.locked):hover {
    border-color: var(--accent-color);
}
.background-card.equipped {
    border-color: var(--accent-color);
    background-color: var(--accent-color-faded);
    box-shadow: 0 0 10px var(--accent-color-faded);
}
.background-preview {
    width: 100%;
    height: 60px;
    border-radius: 8px;
    border: 1px solid var(--dark-grey);
    background-size: cover;
    background-position: center;
}
.background-card .background-name {
    font-size: 0.8rem;
    font-weight: 700;
}
.background-card .background-desc {
    font-size: 0.8rem;
    color: var(--text-muted-color);
}


.game-player-grid {
    width: 100%;
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); 
    gap: 8px;
    justify-content: center;
    padding: 10px;
}
.game-player-card {
    background: var(--dark-grey);
    border-radius: var(--border-radius);
    position: relative;
    overflow: hidden;
    border: 1px solid var(--dark-grey);
    min-height: 70px; 
    transition: border-color 0.3s ease;
}
.game-player-card.is-ready {
    border-color: var(--accent-color);
}
.player-ready-icon {
    color: var(--accent-color);
    font-size: 1rem;
    margin-left: auto;
    padding-left: 5px;
}

.game-player-card .player-card-background {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-size: cover;
    background-position: center;
    opacity: 0.15; 
    z-index: 1;
}
.game-player-card .player-card-content {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px; 
    background: linear-gradient(90deg, rgba(40, 40, 40, 0.9) 0%, rgba(40, 40, 40, 0.7) 100%);
    height: 100%;
    min-height: 70px;
}
.game-player-card .player-icon {
    font-size: 1.5rem; 
    color: var(--text-color);
    flex-shrink: 0;
    width: 25px;
    text-align: center;
    transition: color 0.3s ease;
    position: relative; 
}

.game-player-card.is-host {
    border: 1px solid var(--player-accent-color);
}
.game-player-card.is-host .player-icon::after {
    content: '\f521'; 
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    top: -10px; 
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.7rem;
    color: var(--player-accent-color);
    text-shadow: 0 0 3px #000;
    z-index: 5;
}

.game-player-card .player-info {
    display: flex;
    flex-direction: column;
    text-align: left;
    gap: 1px;
    overflow: hidden; 
    flex-grow: 1; 
}
.game-player-card .player-title {
    font-size: 0.7rem; 
    font-weight: 700;
    color: var(--accent-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.game-player-card .player-name {
    font-size: 0.85rem; 
    font-weight: 700;
    color: var(--text-muted-color);
    white-space: normal;
    overflow: visible;
    text-overflow: clip;
    line-height: 1.1; 
    transition: color 0.3s ease;
}

.game-player-card .player-name[style*="background"] {
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent !important;
}

.game-player-card .player-score {
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--accent-color);
    margin-left: auto; 
    padding-left: 5px;
}
.game-player-card .player-reaction-popup {
     top: -10px;
}


.timer-bar-container {
    width: 100%;
    height: 6px;
    background-color: var(--dark-grey);
    border-radius: 3px;
    overflow: hidden;
}
.timer-bar {
    width: 100%;
    height: 100%;
    background: var(--accent-color);
    border-radius: 3px;
    transition: width 30s linear; 
}

.guess-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 20px;
}
.guess-input {
    font-size: 1.1rem;
    padding: 15px;
    border-radius: var(--border-radius); 
    background-color: var(--surface-color); 
    border: 1px solid var(--medium-grey);
}
.guess-input::placeholder {
    color: var(--text-muted-color);
}
.mc-button-group {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}
.mc-button-group h3 {
    grid-column: 1 / -1; 
    text-align: left;
    font-size: 0.9rem;
    color: var(--text-muted-color);
    margin: 5px 0 0 0;
}
.mc-button {
    width: 100%;
    padding: 12px;
    font-size: 0.9rem;
    border-radius: var(--border-radius);
    border: 1px solid var(--medium-grey);
    background-color: var(--dark-grey); 
    color: var(--text-muted-color);
    transition: transform 0.1s ease, background-color 0.2s ease; 
}
.mc-button:active {
    transform: scale(0.97); 
}
.mc-button.active {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
    color: var(--background-color);
}

.ready-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 20px;
}
#ready-status-display {
    font-size: 0.9rem;
    color: var(--text-muted-color);
    font-weight: 700;
}

.round-result-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 20px;
}
.correct-answer-card {
    background-color: var(--surface-color);
    border-radius: var(--border-radius);
    padding: 15px;
    display: flex;
    gap: 15px;
    align-items: center;
}
.album-art {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    object-fit: cover;
    flex-shrink: 0;
}
.track-info {
    display: flex;
    flex-direction: column;
    text-align: left;
    overflow: hidden;
}
.track-title {
    font-size: 1.2rem;
    font-weight: 800;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.track-artist {
    font-size: 1rem;
    color: var(--text-muted-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.track-year {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--accent-color);
    margin-top: 5px;
}

.round-result-details {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.player-result-card {
    background-color: var(--dark-grey);
    border-radius: var(--border-radius);
    padding: 10px 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}
.player-result-card .player-name {
    font-size: 1rem;
    font-weight: 700;
}
.points-breakdown {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 3px;
    font-size: 0.8rem;
    color: var(--text-muted-color);
}
.point-item.correct {
    color: var(--success-color);
}
.point-item.wrong {
    color: var(--danger-color);
    opacity: 0.7;
}
.round-total-points {
    font-size: 1.3rem;
    font-weight: 800;
    color: var(--accent-color);
}

.app-background.bg-synthwave, .bg-synthwave {
    background: #000020;
    background-image: 
        radial-gradient(ellipse at 50% 0%, rgba(255, 0, 150, 0.4) 0%, rgba(0, 0, 0, 0) 60%),
        radial-gradient(ellipse at 50% 100%, rgba(0, 200, 255, 0.4) 0%, rgba(0, 0, 0, 0) 60%);
}
.app-background.bg-concert, .bg-concert {
    background: #110a0f;
    background-image: 
        radial-gradient(ellipse at 50% 100%, rgba(255, 100, 0, 0.5) 0%, rgba(0, 0, 0, 0) 70%),
        radial-gradient(ellipse at 20% 0%, rgba(100, 0, 255, 0.6) 0%, rgba(0, 0, 0, 0) 50%),
        radial-gradient(ellipse at 80% 0%, rgba(255, 0, 100, 0.6) 0%, rgba(0, 0, 0, 0) 50%);
}
.app-background.bg-vinyl, .bg-vinyl {
    background-color: #3a2e28;
    background-image: linear-gradient(135deg, #3a2e28 0%, #1e1a18 100%);
}
.app-background.bg-sunset, .bg-sunset {
    background: linear-gradient(170deg, #ff7e5f, #feb47b, #121212 70%);
}
.app-background.bg-ocean, .bg-ocean {
    background: linear-gradient(170deg, #005c97, #363795, #121212 70%);
}
.app-background.bg-forest, .bg-forest {
    background: linear-gradient(170deg, #136a8a, #267871, #121212 70%);
}
.app-background.bg-stars, .bg-stars {
    background-color: #00001a;
    background-image: radial-gradient(circle at 10% 20%, rgba(200, 200, 255, 0.3), transparent 20%),
                      radial-gradient(circle at 80% 30%, rgba(200, 200, 255, 0.3), transparent 20%),
                      radial-gradient(circle at 40% 70%, rgba(200, 200, 255, 0.3), transparent 20%),
                      radial-gradient(circle at 90% 85%, rgba(200, 200, 255, 0.3), transparent 20%);
    background-size: 1px 1px;
    background-repeat: repeat;
}
.app-background.bg-retro, .bg-retro {
    background-color: #3D0000;
    background-image: linear-gradient(135deg, #3D0000 0%, #6A0000 50%, #B20000 100%);
}
.app-background.bg-studio, .bg-studio {
    background-color: #444;
    background-image: linear-gradient(45deg, #333 25%, transparent 25%, transparent 75%, #333 75%, #333), 
                      linear-gradient(45deg, #333 25%, transparent 25%, transparent 75%, #333 75%, #333);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
}
.app-background.bg-party, .bg-party {
    background: linear-gradient(45deg, #ff00ff, #00ffff, #ffff00, #ff00ff);
    background-size: 400% 400%;
    animation: gradientParty 10s ease infinite;
}
@keyframes gradientParty {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.app-background.bg-aurora, .bg-aurora {
    background: linear-gradient(135deg, #7F00FF, #E100FF, #00BFFF);
    background-size: 200% 200%;
    animation: gradientParty 8s ease infinite;
}
.app-background.bg-comic, .bg-comic {
    background-color: #e0e0e0;
    background-image: 
        linear-gradient(90deg, rgba(255,0,0,0.2) 50%, transparent 50%),
        linear-gradient(rgba(255,0,0,0.2) 50%, transparent 50%);
    background-size: 50px 50px;
}
.app-background.bg-matrix, .bg-matrix {
    background-color: #000000;
    background-image: linear-gradient(0deg, transparent 70%, #00FF00 70%);
    background-size: 2px 15px;
    animation: matrix 0.5s linear infinite;
}
@keyframes matrix {
    0% { background-position: 0% 0%; }
    100% { background-position: 0% 100%; }
}
.app-background.bg-nebula, .bg-nebula {
    background: radial-gradient(circle at 20% 30%, #FF00FF 0%, #000000 40%),
                radial-gradient(circle at 80% 70%, #00FFFF 0%, #000000 40%);
    background-color: #000010;
}
.app-background.bg-circuit, .bg-circuit {
    background-color: #0a2e36;
    background-image: linear-gradient(0deg, var(--accent-color-faded) 1px, transparent 1px),
                      linear-gradient(90deg, var(--accent-color-faded) 1px, transparent 1px);
    background-size: 20px 20px;
}
.app-background.bg-lava, .bg-lava {
    background: linear-gradient(45deg, #FF4500, #FFD700, #FF0000);
    background-size: 200% 200%;
    animation: gradientParty 5s ease infinite;
}
.app-background.bg-ice, .bg-ice {
    background: linear-gradient(135deg, #E0FFFF, #B0E0E6, #AFEEEE);
}
.app-background.bg-desert, .bg-desert {
    background: linear-gradient(180deg, #F0E68C 0%, #D2B48C 70%, #8B4513 100%);
}
.app-background.bg-metal, .bg-metal {
    background: linear-gradient(90deg, #808080, #C0C0C0, #808080);
}
.app-background.bg-wood, .bg-wood {
    background-color: #8B4513;
    background-image: linear-gradient(90deg, rgba(0,0,0,0.1) 50%, transparent 50%);
    background-size: 50px 50px;
}

.mode-box {
    transition: transform 0.2s ease, background-color 0.2s ease;
    background-color: rgba(24, 24, 24, 0.7); 
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px); 
    border: 2px solid var(--dark-grey);
}
.mode-box:not(:disabled):hover {
    background-color: var(--dark-grey) !important;
    border-color: var(--medium-grey);
    transform: translateY(-3px);
}
.mode-box:not(:disabled):active {
    transform: scale(0.98) translateY(0);
}

#end-screen .container {
    gap: 25px;
}
#end-screen-leaderboard {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.end-screen-player {
    background-color: var(--dark-grey);
    border-radius: var(--border-radius);
    padding: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border: 2px solid var(--dark-grey);
}
.end-screen-player.rank-1 {
    border-color: #FFD700; 
    background-color: #ffd7001a;
}
.end-screen-player.rank-2 {
    border-color: #C0C0C0; 
    background-color: #c0c0c01a;
}
.end-screen-player.rank-3 {
    border-color: #CD7F32; 
    background-color: #cd7f321a;
}
.end-screen-player-info {
    display: flex;
    align-items: center;
    gap: 10px;
}
.end-screen-player-rank {
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--text-muted-color);
    width: 30px;
    text-align: center;
}
.end-screen-player-name {
    font-size: 1rem;
    font-weight: 700;
}
.end-screen-player-score {
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--accent-color);
}

#end-screen-rewards {
    background-color: var(--surface-color);
    padding: 20px;
    border-radius: var(--border-radius);
    text-align: center;
}
#end-screen-rewards h3 {
    margin-bottom: 15px;
    color: var(--text-muted-color);
}
#end-screen-rewards p {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 5px;
}
#end-screen-rewards p span {
    color: var(--accent-color);
}

#gift-modal-overlay .modal {
    gap: 20px;
}
#gift-recipient-name {
    color: var(--accent-color);
    font-weight: 800;
}

#game-content-area .timeline-container {
    width: 100%;
    overflow-x: auto;
    white-space: nowrap;
    padding: 20px 0;
    border-top: 2px solid var(--dark-grey);
    border-bottom: 2px solid var(--dark-grey);
}
#game-content-area .timeline-track {
    display: inline-block;
    width: 120px;
    margin: 0 10px;
    vertical-align: top;
    text-align: center;
}
#game-content-area .timeline-track img {
    width: 100px;
    height: 100px;
    border-radius: 8px;
    object-fit: cover;
}
#game-content-area .timeline-track .track-year {
    font-size: 1.2rem;
    font-weight: 800;
    color: var(--accent-color);
    margin-top: 10px;
}
#game-content-area .timeline-track .track-title {
    font-size: 0.8rem;
    white-space: normal;
}
#game-content-area .song-to-place {
    margin-top: 20px;
    background-color: var(--surface-color);
    border-radius: var(--border-radius);
    padding: 15px;
    text-align: center;
}